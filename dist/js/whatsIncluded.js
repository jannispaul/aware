import{o as u,a as p}from"./onAllPages.js";function y(){const s=Array.from(document.querySelectorAll("[data-element='nest-target']")),a=Array.from(document.querySelectorAll("[data-identifier]")),r=[...new Set(a.map(o=>o.dataset.identifier))],i=document.querySelectorAll("[data-element='nest-source']");r.length>1?i.forEach(o=>{s[1].closest(`[data-identifier=${o.dataset.identifier}]`);let l=s.filter(e=>e.closest(`[data-identifier=${o.dataset.identifier}]`));c(o,l)}):c(i[0],Array.from(s));function c(o,l){const e=o.querySelectorAll("[data-category]");e.length,e.forEach(n=>{let t=n.dataset.category,d=l.filter(f=>f.dataset.category===t)[0];(d==null?void 0:d.dataset.element)==="nest-target"&&d.appendChild(n)}),l.forEach(n=>{let t=n.parentNode.parentNode.querySelector("[data-element='position-count']");if(!t)return;n.children.length>0?t.innerText=n.children.length:t.remove()})}i.forEach(o=>o.parentNode.remove())}function h(s){const a=document.querySelectorAll('[fs-modal-element="open"]');a.forEach(e=>{e.removeAttribute("fs-modal-element"),e.setAttribute("fs-modal-element","tooltip")});let r;function i(){window.fsAttributes=window.fsAttributes||[],window.fsAttributes.modal.destroy(),window.fsAttributes.modal.init()}function c(e){i();const n=e.getBoundingClientRect();let t=e.cloneNode(!0);t.style.display="block",t.style.transform="translateY(0)";const d=n.left+window.scrollX,f=n.top+window.scrollY+4;t.style.left=d+"px",t.style.top=f+"px",document.body.appendChild(t),r=t}function o(e){let t=e.target.parentNode.querySelector('[data-element="tooltip"]');t&&(t.style.display="block",c(t),t.style.display="none")}function l(e){r==null||r.remove()}a.forEach(e=>e.addEventListener("mouseenter",o)),a.forEach(e=>e.addEventListener("mouseleave",l))}function g(s){const a=document.querySelectorAll('[fs-modal-element="open"]'),r=document.querySelectorAll('[data-element="marker-info"]'),i=document.querySelector('[data-element="modal-body"]');a.forEach(function(c,o){c.addEventListener("click",function(){const l=r[o];l&&(i.innerHTML="",i.appendChild(l.cloneNode(!0)))})})}function m(){u(),y(),g(),!p()&&h()}document.readyState=="loading"?document.addEventListener("DOMContentLoaded",m):m();
